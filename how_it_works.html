<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>🛠 如何工作</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="assets/style.css" />
  <link type="text/css" rel="stylesheet" href="assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="assets/hljs-github.min.css"/>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110647385-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110647385-1');
  </script>
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="parcel" src="assets/parcel.png" srcset="assets/parcel@2x.png 2x, assets/parcel@3x.png 3x" height="30">
      <img class="type" src="assets/logo.svg" alt="Parcel">
    </a>
    <div class="links">
      <a href="https://github.com/parcel-bundler/parcel" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
      <ul>
        <li><a href="getting_started.html">🚀 起步</a></li>
        <li><a href="assets.html">📦 资源</a></li>
        <li><a href="transforms.html">🐠 转换</a></li>
        <li><a href="code_splitting.html">✂️ 代码分块</a></li>
        <li><a href="hmr.html">🔥 热更新</a></li>
        <li><a href="production.html">✨ 生产</a></li>
      </ul>
      <h3>进阶</h3>
      <ul>
        <li><a href="how_it_works.html">🛠 如何工作</a></li>
        <li><a href="asset_types.html">📝 资源类型</a></li>
        <li><a href="packagers.html">📦 装包器</a></li>
        <li><a href="plugins.html">🔌 插件</a></li>
      </ul>
    </nav>
    <main><h1 id="🛠-如何工作"><a class="header-link" href="#🛠-如何工作"></a>🛠 如何工作</h1>
<p>Parcel 将 <strong>资源</strong> 树转换为 <strong> bundle （文件束）</strong> 树。 很多其他构建工具基本上都是围绕 JavaScript 资源，再附加其他格式的资源。 例如，转换为字符串内联在 JS 文件中。 Parcel 对文件类型不敏感 - 它将以你期望的方式与任何类型的资源一起工作，无需配置。 Parcel的打包过程有三个步骤。</p>
<h3 id="1.-构建资源树"><a class="header-link" href="#1.-构建资源树"></a>1. 构建资源树</h3>
<p>Parcel 将单个入口资源作为输入，可以是任何类型：JS 文件、HTML、CSS、以及图像等等。在 Parcel 中定义了各种<a href="asset_types.html">资源类型</a>，它们知道如何处理特定的文件类型。 资源将被解析、提取依赖，最终转换成编译后的格式。 这也就创建了一个资源树。</p>
<h3 id="2.-构建结果文件树"><a class="header-link" href="#2.-构建结果文件树"></a>2. 构建结果文件树</h3>
<p>一旦构建了资源树，这些资源就被放入 bundle 树中。 为入口资源创建一个 bundle ，并为动态的 <code>import()</code> 创建子包，触发代码拆分块。</p>
<p>当导入不同类型的资源时，会创建同级 bundle ，例如，如果你在 JavaScript 导入了 CSS 文件，则会将其放该 JS 文件同级的 bundle 中。</p>
<p>如果一个资源被多个 bundle 引用，它将被打包到最近的共同祖先 bundle 中，因此不会重复打包。</p>
<h3 id="3.-装包"><a class="header-link" href="#3.-装包"></a>3. 装包</h3>
<p>在 bundle 树创建后，每个 bundle 通过对应文件类型的 <a href="packagers.html">packager</a> 输出到一个文件。装包器知道如何将每个资源的代码合并到最终文件中，并且被浏览器加载的。</p>
    </main>
  </div>
  <script>
    (function () {
      var activeLink = Array.from(document.querySelectorAll('nav a')).find(function (a) {
        return a.href === window.location.href;
      });

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
